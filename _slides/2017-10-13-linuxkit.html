---
layout: slide
title: LinuxKit and Container OS
class: center, middle
---

@title[Introduction]
# <span style="color: #e49436">LinuxKit</span> & <span style="color: #e49436">Alpine</span>

#### The minimal Linux distro for Containers
<br>
<br>
<span style="color: #bbb; font-size: 80%">[ Easystack System Engineer Knowledge Sharing ]</span>
<br>
<span style="color: #bbb; font-size: 80%">[ 2017/10/13 Shawn Wang ]</span>

---
@title[PITCHME.md]

#### GitPitch turns <span style="color: #e49436; text-transform: none">PITCHME.md</span> into
#### interactive,
#### online and offline slideshows.
<br>
<span style="color:gray; font-size:0.6em;">[ JUST LIKE THIS ONE ]</span>

---

#### No more <span style="color: gray">Keynote.</span>
#### No more <span style="color: gray">Powerpoint.</span>
<br>
#### Just <span style="color: #e49436">Markdown</span>.
#### Then <span style="color: #e49436">Git-Commit</span>.

---
@title[Step 1. Create 'PITCHME.md']

### <span style="color: #e49436">STEP 1. Create 'PITCHME.md'</span>
<br>

#### Create GitPitch slideshow content using GitHub Flavored Markdown in your favorite editor.

<br>
<span style="color:gray; font-size:0.6em;">[ AS EASY AS README.md ]</span>

---
@title[Step 2. Git-Commit]

### <span style="color: #e49436">STEP 2. GIT-COMMIT</span>
<br>

```shell
$ git add PITCHME.md
$ git commit -m "New slideshow content."
$ git push

Done!

```

@[1](Add your PITCHME.md slideshow content file.)
@[2](Commit PITCHME.md to your local repo.)
@[3](Push PITCHME.md to your public repo and you're done!)
@[5](Supports GitHub, GitLab, Bitbucket, GitBucket, Gitea, and Gogs.)

---
@title[Step 3. Done!]

### <span style="color: #e49436">STEP 3. GET THE WORD OUT!</span>

<br>

<span style="font-size: 1.3em;"><span style="color:white">htt</span><span style="color:white">ps://git</span><span style="color: #e49436">pitch</span><span style="color: white">.com/<span style="color: #e49436">user</span>/<span style="color: #e49436">repo</span>/<span style="color: #e49436">branch</span></span>

<br>

#### Instantly use your GitPitch slideshow URL to promote, pitch or present absolutely anything.

---
@title[Slide Rich]

### <span style="color: #e49436">Slide Rich</span>

#### Code Presenting for Blocks, Files, and GISTs
#### Image, Video, Chart, and Math Slides
#### Multiple Themes With Easy Customization
<br>
#### <span style="color: #e49436">Plus collaboration is built-in...</span>
#### Your Slideshow Is Part Of Your Project
#### Under Git Version Control Within Your Git Repo

---

@title[Feature Rich]

### <span style="color: #e49436">Feature Rich</span>

#### Present Online or Offline
#### With Speaker Notes Support
#### Print Presentation as PDF
#### Auto-Generated Table-of-Contents
#### Share Presentation on Twitter or LinkedIn

---

### Go for it.
### Just add <span style="color: #e49436; text-transform: none">PITCHME.md</span> ;)
<br>
<a style="font-size:0.6em;" href="https://github.com/gitpitch/gitpitch/wiki">[ Click To Learn More On Wiki ]</a>



---

## Container OS

- host os
 - atomic/core-os: small core with container apps
 - linuxkit/RancherOS/(snappy): make core via container apps

- instance os
 - small as possible (alpine)
 - automate deploying, scaling (k8s)

---

## Alpine Linux Ideas:

 - Natanael Copa: "The idea was that the system was installed in memory during boot from a read-only media and that you could remove the boot media once it was booted"

 - "Our main requirement was that it should have only a few files as the full state - all others usually had one or more files per installed package"

---

## Alpine History

 - Linux Router Project(LRP) -> LEAF -> Alpine
 - Alpine was originally built with Gentoo
 - apk: evaluated pacman from Arch Linux, .deb, ipkg, .rpm and others

---

## Apline design

 - security-oriented
   - (grsec/PaX)[https://grsecurity.net/features.php] patches
 - core utilities:
   - musl libc
   - BusyBox
 - bootloader: syslinux
 - init system: openrc
 - installation modes: sys/diskless/data
   - lbr (Alpine local backup)

---

## Apline and Container

https://thenewstack.io/alpine-linux-heart-docker/

disposable container concept

---

## Alpine and Containers:
 - before docker
   - alpine-vserver flavor
   - LXC

package
 - Alpine Package Keeper
    - “since the system was installed from scratch every reboot we needed a package manager that was fast too,” said Copa.
   - “The major reason that we ended up with our own is our ‘run-from-ram’ requirement. We needed a fast manager that can set up tmpfs rootfs from initfs.”
 - aports: a tree of ported applications for the distro

---


## Container OS requirements

 - transactionally update
 - kernel, initramfs and bootloader
 - root or disk partitions
 - small and fast

---

## moby project

 - runc, HyperKit, VPNKit, SwarmKit, InfraKit, containerd, etc..
 - moby tool converts the yaml specification into one or more bootable images.


---

linuxkit
 - *kernel* specifies a kernel Docker image, containing a kernel and a filesystem tarball, eg containing modules. The example kernels are built from kernel/
 - *init* is the base init process Docker image, which is unpacked as the base system, containing init, containerd, runc and a few tools. Built from pkg/init/
 - *onboot* are the system containers, executed sequentially in order. They should terminate quickly when done.
 - *services* is the system services, which normally run for the whole time the system is up
 - *files* are additional files to add to the image
---

linuxkit image
 - platform-aws.md
 - platform-azure.md
 - platform-gcp.md
 - platform-hyperkit.md 
 - platform-hyperv.md
 - platform-openstack.md
 - platform-packet.md
 - platform-qemu.md
 - platform-vmware.md

---

linuxkit kernel config
 - https://github.com/linuxkit/linuxkit/tree/master/kernel
 - https://github.com/linuxkit/linuxkit/blob/master/docs/kernels.md
sub-projects
 - linux-okernel

https://docs.docker.com/engine/userguide/eng-image/multistage-build/

runc

ostree vs alpine
skopeo

